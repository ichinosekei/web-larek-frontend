# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта:
* Проект построен с использованием паттерна MVC (Model-View-Controller):

* Models: Управляют данными и бизнес-логикой.
* Views: Отвечают за отображение интерфейса и взаимодействие с пользователем.
* Controllers: Обеспечивают связь между моделями и представлениями.


### Основные сущности и их интерфейсы
#### Товары
``` typescript
// Товар
export interface IProduct {
id: string;           // Уникальный идентификатор
title: string;        // Название
description: string;  // Описание
image: string;        // URL изображения
category: string;     // Категория
price: number | null; // Цена или null (если цена отсутствует)
}

// Массив товаров
export interface IProductListResponse {
    products: IProduct[]; // Массив товаров
}
// Товар в корзине
export interface IOrderItem {
    productId: string; // Идентификатор товара
    quantity: number;  // Количество единиц товара
}
```
#### Категории
```typescript
// Категория
export interface ICategory {
id: string;    // Уникальный идентификатор
name: string;  // Название категории
}
// Массив категорий
export interface ICategoryListResponse {
  categories: ICategory[]; // Массив категорий
}

```
#### Заказы
```typescript
// заказ
export interface IOrder {
items: IOrderItem[]; // Товары в заказе
total: number;       // Общая сумма
payment: string;     // Способ оплаты
address: string;     // Адрес доставки
email: string;       // Почта
phone: string;       // Телефон
}
// результа заказа
export interface IOrderResult {
  id: string; // Идентификатор заказа
  total: number; // Общая стоимость заказа
}

```
###  Архитектурные слои
* Models (данные)\
  Назначение: управление состоянием и данными приложения.\
  Основные классы:
  * ProductModel: управление товарами.
  * CategoryModel: управление категориями.
  * OrderModel: управление заказами.

* Views (представления)\
   Назначение: отображение данных и взаимодействие с пользователем.\
   Основные компоненты:
   * ProductListView: отображение каталога товаров.
   * ProductModalView: показ информации о товаре.
   * CartView: управление корзиной.
   * OrderFormView: форма оформления заказа.

* Controllers (управляющие компоненты) \
Назначение: связь между данными и представлениями, управление логикой.\
Основные контроллеры:
   * ProductController: загрузка данных о товарах.
   * CartController: добавление/удаление товаров в корзину.
   * OrderController: валидация и отправка заказа.


* Взаимодействие компонентов
    * Загрузка данных с API: 
ProductController запрашивает данные о товарах и передает их в ProductListView.
Данные о категориях передаются в CategoryModel для фильтрации товаров.

   * Работа с корзиной:

При добавлении товара в корзину CartController обновляет данные корзины в CartModel.
CartView обновляет интерфейс корзины.
   * Оформление заказа:

OrderFormView получает данные пользователя.
OrderController проверяет валидность и отправляет данные заказа через API.

* Особенности реализации

 Класс `Api` имеет следующие свойства и методы.

Методы:
- `handleResponse(response: Response): Promise<object>` - обработчик ответа сервера.
- `get(uri: string)` - принимает изменяющеюся часть url-адреса, возвращает ответ от сервера.
- `post(uri: string, data: object, method: ApiPostMethods = 'POST')` - принимает изменяющеюся часть url-адреса, принимает данные в виде объекта для отправки на сервер, type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'.

 Класс `EventEmitter` - брокер событий следующие методы.

Класс EventEmitter реализует паттерн «Observer/Наблюдатель» и обеспечивает работу событий, его методы позволяют устанавливать и снимать слушатели событий, вызвать слушатели при возникновении события.

Методы:
- `on` - для подписки на событие.
- `off` - для отписки от события.
- `emit` - уведомления подписчиков о наступлении события соответственно.
- `onAll` - для подписки на все события.
- `offAll` - сброса всех подписчиков.
- `trigger` - генерирует заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса `EventEmitter`.

